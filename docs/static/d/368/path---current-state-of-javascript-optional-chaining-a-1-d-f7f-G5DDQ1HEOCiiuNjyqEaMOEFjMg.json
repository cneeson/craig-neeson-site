{"data":{"site":{"siteMetadata":{"title":"Craig Neeson","author":"Craig Neeson"}},"markdownRemark":{"id":"52a9d1c2-2109-5992-a3bf-fcfc59b2a7e2","excerpt":"The ECMAScript 2019 specification has been out for a while now (a full year to be exact), but as many front-end developers will know - it takes a while for new…","html":"<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/3ca06e2e927f43dcc6cd115324d04899/d32dd/chain.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 71.12375533428165%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAOABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAEDAgX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAHnbUxkg//EABkQAAIDAQAAAAAAAAAAAAAAAAABAhESEP/aAAgBAQABBQJXJZyNll8//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFhABAQEAAAAAAAAAAAAAAAAAIQEg/9oACAEBAAY/Agmv/8QAGhAAAgMBAQAAAAAAAAAAAAAAASEAETEQcf/aAAgBAQABPyFN6ZQEFpj4mQ2NPn//2gAMAwEAAgADAAAAEHAP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAGxABAAIDAQEAAAAAAAAAAAAAAQARITFBUZH/2gAIAQEAAT8QxzVtbYiDUbB28v7OEixWBDubHvhMuSf/2Q=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"chaining\"\n        title=\"\"\n        src=\"/static/3ca06e2e927f43dcc6cd115324d04899/c739e/chain.jpg\"\n        srcset=\"/static/3ca06e2e927f43dcc6cd115324d04899/8ee9c/chain.jpg 148w,\n/static/3ca06e2e927f43dcc6cd115324d04899/ebbe7/chain.jpg 295w,\n/static/3ca06e2e927f43dcc6cd115324d04899/c739e/chain.jpg 590w,\n/static/3ca06e2e927f43dcc6cd115324d04899/5413e/chain.jpg 885w,\n/static/3ca06e2e927f43dcc6cd115324d04899/4efde/chain.jpg 1180w,\n/static/3ca06e2e927f43dcc6cd115324d04899/abfc3/chain.jpg 1770w,\n/static/3ca06e2e927f43dcc6cd115324d04899/d32dd/chain.jpg 2109w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>The <a href=\"https://www.ecma-international.org/ecma-262/10.0/index.html\">ECMAScript 2019 specification</a> has been out for a while now (a full year to be exact), but as many front-end developers will know - it takes a while for new features to come into support for browsers, and it takes even longer for adoption and confidence in the new features to rise throughout the community. Luckily for us, the start of 2020 ushers in a few options to take advantage of these new features. </p>\n<p>One of the biggest game changers for me personally is <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Optional_chaining\">Optional Chaining</a>. Through just a small addition to the language syntax, the spec aims to reduce some of the more repetitive (and ugly) code that developers are forced to write when dealing with deeply nested objects.</p>\n<h2>So what is it?</h2>\n<p>Optional chaining operators, or as they are more commonly known in other languages - ‘Null-Conditional Operators’ have been available for languages like <a href=\"https://docs.microsoft.com/en-gb/dotnet/csharp/language-reference/operators/member-access-operators#null-conditional-operators--and-\">C#</a> for a while now. Say we have a deeply nested object like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> deepObj <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    firstLevelA<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        secondLevel<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n            thirdLevel<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n                stringVal<span class=\"token punctuation\">:</span> <span class=\"token string\">'Hello World!'</span><span class=\"token punctuation\">,</span>\n                numVal<span class=\"token punctuation\">:</span> <span class=\"token number\">5298</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    firstLevelB<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    firstLevelC<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>One of the more clunky tasks in JavaScript is safely retrieving one of the deeply nested values here. The clunkiness comes from the need to ensure that our target key at each level exists - before accessing its properties. Failing to do so will result in the dreaded <code class=\"language-text\">Uncaught TypeError: Cannot read property &#39;&lt;keyName&gt;&#39; of undefined</code> error. </p>\n<p>To access <code class=\"language-text\">stringVal</code> safely using pre-ES2019 code, we would do something like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> theStringVal <span class=\"token operator\">=</span> deepObj<span class=\"token punctuation\">.</span>firstLevelA <span class=\"token operator\">&amp;&amp;</span> \n    deepObj<span class=\"token punctuation\">.</span>firstLevelA<span class=\"token punctuation\">.</span>secondLevel <span class=\"token operator\">&amp;&amp;</span> \n    deepObj<span class=\"token punctuation\">.</span>firstLevelA<span class=\"token punctuation\">.</span>secondLevel<span class=\"token punctuation\">.</span>thirdLevel <span class=\"token operator\">&amp;&amp;</span>\n    deepObj<span class=\"token punctuation\">.</span>firstLevelA<span class=\"token punctuation\">.</span>secondLevel<span class=\"token punctuation\">.</span>thirdLevel<span class=\"token punctuation\">.</span>stringVal<span class=\"token punctuation\">;</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>theStringVal<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// 'Hello World!'</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>A bit verbose, isn’t it? This is especially troublesome for things like API responses where the developer cannot <em>guarantee</em> the shape of the object that is returned. </p>\n<p>A potential improvement could be to <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment\">destructure</a> the <code class=\"language-text\">deepObj</code> and assign the value of <code class=\"language-text\">stringVal</code> to a new variable that is in scope:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> \n    firstLevelA<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span> \n        secondLevel<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span> \n            thirdLevel<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span> stringVal<span class=\"token punctuation\">,</span> nonExistentKey <span class=\"token punctuation\">}</span> \n        <span class=\"token punctuation\">}</span> \n    <span class=\"token punctuation\">}</span> \n<span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> deepObj<span class=\"token punctuation\">;</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>stringVal<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// 'Hello World'</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>nonExistentKey<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// undefined</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>The primary benefit we get here is that if any of the destructured keys do not exist, the <code class=\"language-text\">stringVal</code> variable will default to <code class=\"language-text\">undefined</code> - avoiding the <code class=\"language-text\">TypeError</code>.</p>\n<h2>A Better Way</h2>\n<p>The Optional Chaining operator looks like this: <code class=\"language-text\">?.</code>. Here it is in action with our example object:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> theStringVal <span class=\"token operator\">=</span> deepObj<span class=\"token operator\">?</span><span class=\"token punctuation\">.</span>firstLevelA<span class=\"token operator\">?</span><span class=\"token punctuation\">.</span>secondLevel<span class=\"token operator\">?</span><span class=\"token punctuation\">.</span>thirdLevel<span class=\"token operator\">?</span><span class=\"token punctuation\">.</span>stringVal<span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>All of the intermediate key-checking has been removed and each check is now performed implicitly by the <code class=\"language-text\">?.</code> operator. If any of the keys in the chain do not exist then <code class=\"language-text\">undefined</code> will be returned.</p>\n<p>The operator also works using array notation:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> theStringVal <span class=\"token operator\">=</span> deepObj<span class=\"token operator\">?</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">[</span><span class=\"token string\">'firstLevelA'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">?</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">[</span><span class=\"token string\">'secondLevel'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">?</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">[</span><span class=\"token string\">'thirdLevel'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">?</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">[</span><span class=\"token string\">'stringVal'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>And for safely invoking functions that may or may not exist in objects.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> obj<span class=\"token operator\">?</span><span class=\"token punctuation\">.</span>someNamespace<span class=\"token punctuation\">.</span>myFunction<span class=\"token operator\">?</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<h2>Browser compatibility</h2>\n<p>At the time of writing, optional chaining is only available for use under an experimental flag in <a href=\"https://caniuse.com/#feat=mdn-javascript_operators_optional_chaining\">Chrome 79</a>. </p>\n<h2>So how can I use it?</h2>\n<p>For TypeScript users, optional chaining has been available since November 2019 in <a href=\"https://www.typescriptlang.org/docs/handbook/release-notes/typescript-3-7.html\">TS 3.7</a>. The syntax is identical to vanilla JavaScript, so all of the same examples will work there. For JavaScript users, <a href=\"https://babeljs.io/\">Babel</a> has released a <a href=\"https://babeljs.io/docs/en/babel-plugin-proposal-optional-chaining\">plugin</a> that makes the operator available for use. </p>\n<h2>Safe for production?</h2>\n<p>Although the operator is still considered an ‘experimental’ feature - we can be fairly confident that the syntax will not change due to its similarity with other languages that operate in the same way. The only thing that could change is the ‘under-the-hood’ implementation in whichever JavaScript engine you are running against, but even then the expected behaviour has been agreed upon at this point. That worry is also negated by the fact that your code is likely to be normalised by the TypeScript or Babel compiler before hitting it’s destination engine anyway.</p>\n<h2>A data-access win</h2>\n<p>Optional chaining is just one of many newer features to come to JavaScript, keep track of new features that are in stage 3 in the ECMAScript proposals <a href=\"https://github.com/tc39/proposals\">GitHub repository</a>.</p>\n<p>Thanks for reading :)</p>","frontmatter":{"title":"The Current State of JavaScript Optional Chaining in 2020","date":"December 15, 2019","timeToRead":"3 minute","isNote":false}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/current-state-of-javascript-optional-chaining/","previous":{"fields":{"slug":"/three-takeaways-from-react-amsterdam-2019/"},"frontmatter":{"title":"Three Takeaways from ReactAmsterdam 2019","timeToRead":"3 minute","isNote":false,"isPublished":true}},"next":null}}